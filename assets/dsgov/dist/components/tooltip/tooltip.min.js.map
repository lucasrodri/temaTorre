{"version":3,"file":"components/tooltip/tooltip.min.js","mappings":"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","sources":["webpack://dsgov/webpack/universalModuleDefinition","webpack://dsgov/./src/components/tooltip/tooltip.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dsgov\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dsgov\"] = factory();\n\telse\n\t\troot[\"dsgov\"] = factory();\n})(self, function() {\nreturn ","import { createPopper } from '@popperjs/core'\nclass BRTooltip {\n  constructor(name, component) {\n    this.name = name\n    this.component = component\n    this.activator = component.previousSibling.previousSibling\n    const place = component.getAttribute('place')\n    const positions = ['top', 'right', 'bottom', 'left']\n    this.popover = component.hasAttribute('popover')\n    this.notification = component.classList.contains('br-notification')\n    this.timer = component.getAttribute('timer')\n\n    this.active = component.hasAttribute('active')\n    this.placement = positions.includes(place)\n      ? place\n      : this.notification\n      ? 'bottom'\n      : 'top'\n    this.popperInstance = null\n    this.showEvents = ['mouseenter', 'click', 'focus']\n    this.hideEvents = ['mouseleave', 'blur']\n    this.closeTimer = null\n\n    this._create()\n    this._setBehavior()\n  }\n\n  _setBehavior() {\n    // Ação de abrir padrao ao entrar no ativador\n\n    if (this.activator) {\n      this.showEvents.forEach((event) => {\n        this.activator.addEventListener(event, (otherEvent) => {\n          this._show(otherEvent)\n        })\n      })\n      // }\n    }\n    // Adiciona ação de fechar ao botao do popover\n    // if (this.popover || this.notification) {\n    if (this.popover) {\n      const closeBtn = this.component.querySelector('.close')\n      closeBtn.addEventListener('click', (event) => {\n        this._hide(event, this.component)\n        this._toggleActivatorIcon()\n      })\n      // Ação de fechar padrao ao sair do ativador\n    } else {\n      this.hideEvents.forEach((event) => {\n        this.activator.addEventListener(event, (otherEvent) => {\n          this._hide(otherEvent, this.component)\n        })\n      })\n    }\n    // Abre os elementos que devem aparecer já ativos\n    // if (this.active) {\n    //   this._show(event)\n    // }\n  }\n\n  _create() {\n    this._setLayout()\n\n    // if (typeof this.activator.getBoundingClientRect === 'undefined') {\n    // }\n\n    // Cria a instancia do popper\n    if (this.notification) {\n      this.component.setAttribute('notification', '')\n\n      this.popperInstance = createPopper(this.activator, this.component, {\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 10],\n            },\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              altAxis: false, // false by default\n              mainAxis: true, // true by default\n              // rootBoundary: 'body',\n            },\n          },\n        ],\n        // placement: this.placement,\n        placement: 'bottom',\n        strategy: 'fixed',\n      })\n    } else {\n      const ac = this.activator.getBoundingClientRect()\n      const tt = this.component.getBoundingClientRect()\n      const bw = document.body.clientWidth\n      if (this.placement === 'right') {\n        this.placement =\n          ac.x + ac.width + tt.width > bw ? 'top' : this.placement\n      }\n      if (this.placement === 'left') {\n        this.placement = ac.x - tt.width > 0 ? this.placement : 'top'\n      }\n\n      this.popperInstance = createPopper(this.activator, this.component, {\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 8],\n            },\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              altAxis: true, // false by default\n              // boundary: 'body',\n              mainAxis: true, // true by default\n              // rootBoundary: 'document',\n              tether: false, // true by default\n            },\n          },\n        ],\n        placement: this.placement,\n      })\n\n      const style = window.getComputedStyle(this.component)\n    }\n  }\n\n  _show(event) {\n    this.component.style.display = 'unset'\n    this.component.setAttribute('data-show', '')\n    this.component.style.zIndex = 99\n    this._fixPosition()\n    // Importante pois \"display: none\" conflitua com a instancia do componente e precisa ser setado aqui já que pelo css ativa o efeito fade no primeiro carregamento\n\n    this.component.style.visibility = 'visible'\n    if (this.timer) {\n      clearTimeout(this.closeTimer)\n      this.closeTimer = setTimeout(\n        this._hide,\n        this.timer,\n        event,\n        this.component\n      )\n    }\n  }\n\n  _hide(event, component) {\n    component.removeAttribute('data-show')\n    component.style.zIndex = -1\n    component.style.visibility = 'hidden'\n    clearTimeout(component.closeTimer)\n  }\n\n  _setLayout() {\n    // Cria a setinha que aponta para o item que criou o tooltip\n    const arrow = document.createElement('div')\n    arrow.setAttribute('data-popper-arrow', '')\n\n    if (this.component.querySelectorAll('.arrow').length < 1) {\n      arrow.classList.add('arrow')\n    }\n    this.component.appendChild(arrow)\n    // Cria o icone de fechar do po over\n    if (this.popover) {\n      const close = document.createElement('button')\n      close.setAttribute('type', 'button')\n      close.classList.add('close')\n      const ico = document.createElement('i')\n      ico.classList.add('fas', 'fa-times')\n      close.appendChild(ico)\n      this.component.appendChild(close)\n    }\n  }\n\n  _toggleActivatorIcon() {\n    const icon = this.activator.querySelector('button svg')\n    if (icon) {\n      icon.classList.toggle('fa-angle-down')\n      icon.classList.toggle('fa-angle-up')\n    }\n    this.activator.toggleAttribute('active')\n  }\n\n  _fixPosition() {\n    if (this.notification) {\n      setTimeout(() => {\n        const ac = this.activator.getBoundingClientRect()\n        this.component.style = `position: fixed !important; top: ${\n          ac.top + ac.height + 10\n        }px !important; left: auto; right: 8px; display: unset; bottom: auto;`\n        this.component.querySelector(\n          '.arrow'\n        ).style = `position: absolute; left: auto; right: ${\n          document.body.clientWidth - ac.right + ac.width / 5\n        }px !important;`\n      }, 10)\n    }\n  }\n}\n\nexport default BRTooltip\n"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","self","BRTooltip","constructor","name","component","this","activator","previousSibling","place","getAttribute","positions","popover","hasAttribute","notification","classList","contains","timer","active","placement","includes","popperInstance","showEvents","hideEvents","closeTimer","_create","_setBehavior","forEach","event","addEventListener","otherEvent","_show","closeBtn","querySelector","_hide","_toggleActivatorIcon","_setLayout","setAttribute","createPopper","modifiers","options","offset","altAxis","mainAxis","strategy","ac","getBoundingClientRect","tt","bw","document","body","clientWidth","x","width","tether","style","window","getComputedStyle","display","zIndex","_fixPosition","visibility","clearTimeout","setTimeout","removeAttribute","arrow","createElement","querySelectorAll","length","add","appendChild","close","ico","icon","toggle","toggleAttribute","top","height","right"],"sourceRoot":""}